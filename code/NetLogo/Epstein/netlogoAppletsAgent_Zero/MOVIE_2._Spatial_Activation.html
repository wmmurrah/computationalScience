<html>
<head>
<title>MOVIE_2._Spatial_Activation</title>
<style type="text/css">
<!--
/*
    This style sheet is borrowed from the NetLogo User Manual.  However, some of the units were
    changed from em to px because Java's StyleSheet support is limited for relative units such as
    em and % (this will supposively improve with newer versions of the VM) - jrn 7/21/05
    BE VERY VERY CAREFUL when you alter this style sheet -- it's possible to put in
    innocent-looking things that work on some VM's but cause Java exceptions on other for example
    we were using "font-size: 125%" but it caused Java exceptions on Java 1.5 on Windows - ST
    8/25/05
*/
:link { color: rgb(110,0,110); }
:visited { color: rgb(110,0,110); }
body {
    margin-left: 5px;
    font-family: arial, sans-serif;
    background: white;
    font-size: 12pt
}
h1 {
    color: white;
    background: rgb(45,0,45);
    font-size: 18pt;
    margin-bottom: 4px;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h2 {
    margin-top: 15px;
    margin-left: 6px;
    margin-bottom: 4px;
    background: rgb(166,172,255);
    font-size: 15pt;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h3 {
    margin-top: 15px;
    margin-left: 13px;
    margin-bottom: 4px;
    background: rgb(175,175,175);
    font-size: 12pt;
    padding: 0.2em;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    margin-left: 15px;
    font-size: 12pt;
}
h5 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
h6 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
p {
    margin-left: 15px;
    margin-bottom: 3px;
}
pre {
    margin-left: 13px;
    background: rgb(225,225,225);
    font-family: monospace;
    font-size: 12pt;
    padding-left: 10px;
    padding-right: 3px;
    padding-top: 7px;
    padding-bottom: 7px;
    margin-top:9px;
    margin-bottom:0px;
}
code {
    font-family: monospace;
    font-size: 12pt;
}
blockquote {
    border: solid;
    border-style: solid;
    border-width: thin;
    border-color: black;
    background: rgb(250,250,220);
    padding-top: 0px;
    padding-bottom: 7px;
    margin-top: 7px;
    margin-bottom:1px;
}
ol {
   margin-bottom:1px;
}
ul {
   margin-bottom:1px;
}

-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 5.0.5.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://www.java.com/">Oracle's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(MOVIE_2._Spatial_Activation.nlogo), and the files NetLogoLite.jar and NetLogoLite.jar.pack.gz
must all be in the same directory.  (You can copy NetLogoLite.jar and NetLogoLite.jar.pack.gz
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If the NetLogoLite files and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put
a single copy of the NetLogoLite files in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>
<h3>MOVIE_2._Spatial_Activation</h3>
<applet code="org.nlogo.lite.Applet"
        archive="http://press.princeton.edu/video/epstein/agent_zero/applets/NetLogoLite.jar"
        width="932" height="662">
  <param name="DefaultModel"
         value="http://press.princeton.edu/video/epstein/agent_zero/applets/MOVIE_2._Spatial_Activation.nlogo">
  <param name="java_arguments"
         value="-Djnlp.packEnabled=true">
</applet></p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="MOVIE_2._Spatial_Activation.nlogo">MOVIE_2._Spatial_Activation.nlogo</a></p>


<h1>CODE</h1>
<pre><font color="#000000">          </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
          </font><font color="#5a5a5a">;;            AGENT_ZERO                  </font><font color="#000000">
          </font><font color="#5a5a5a">;;       MOVIE 2 Code. Version 1</font><font color="#000000">
          </font><font color="#5a5a5a">;;         Spatial Activation </font><font color="#000000">
          </font><font color="#5a5a5a">;;                 </font><font color="#000000">
          </font><font color="#5a5a5a">;;       Joshua M. Epstein                </font><font color="#000000">
          </font><font color="#5a5a5a">;;         February 2010               </font><font color="#000000">
          </font><font color="#5a5a5a">;;     Revised November 2013  </font><font color="#000000">
          </font><font color="#5a5a5a">;;       Sliders [45,0,1,0,1]</font><font color="#000000">
          </font><font color="#5a5a5a">;;          Book Seed 1  </font><font color="#000000">
          </font><font color="#5a5a5a">;;</font><font color="#000000">
          </font><font color="#5a5a5a">;;   Note: This is the full MOVIE 3 Parable 1 Code, </font><font color="#000000">
          </font><font color="#5a5a5a">;;   modified to produce only random agent movement. </font><font color="#000000">
          </font><font color="#5a5a5a">;;       </font><font color="#000000">
          </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;             </font><font color="#000000">
   


</font><font color="#007f69">to</font><font color="#000000"> use-new-seed                                  </font><font color="#5a5a5a">; Seed generated by NetLogo</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> my-seed </font><font color="#660096">new-seed</font><font color="#000000">            
  </font><font color="#0000aa">output-print</font><font color="#000000"> </font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;Generated seed: &quot;</font><font color="#000000"> my-seed   </font><font color="#5a5a5a">; Print in Command Center window</font><font color="#000000">
  </font><font color="#0000aa">random-seed</font><font color="#000000"> my-seed                            </font><font color="#5a5a5a">; Use the new seed</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> use-seed-from-user                            </font><font color="#5a5a5a">; Queries user for seed</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> my-seed </font><font color="#660096">read-from-string</font><font color="#000000"> </font><font color="#660096">user-input</font><font color="#000000"> </font><font color="#963700">&quot;Enter a random seed (an integer):&quot;</font><font color="#000000">
  </font><font color="#0000aa">output-print</font><font color="#000000"> </font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;User-entelink-colorseed: &quot;</font><font color="#000000"> my-seed  
  </font><font color="#0000aa">random-seed</font><font color="#000000"> my-seed           
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">globals</font><font color="#000000">[                         </font><font color="#5a5a5a">; The more important of these are set w/sliders.</font><font color="#000000">
  inactive-color
  active-color
  destroyed-color 
  link-color
  deactivation-rate              </font><font color="#5a5a5a">; Probablitity a patch returns to inactive from active</font><font color="#000000">
  maximum-stopping-time
]

</font><font color="#007f69">to</font><font color="#000000"> setup-globals
  </font><font color="#0000aa">set</font><font color="#000000"> inactive-color </font><font color="#963700">yellow</font><font color="#000000">      </font><font color="#5a5a5a">; Small random number is added, in setup-patches, for visualization.</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> active-color </font><font color="#963700">orange</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> destroyed-color </font><font color="#963700">red</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> deactivation-rate </font><font color="#963700">8</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> link-color </font><font color="#963700">red</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> maximum-stopping-time </font><font color="#963700">50000</font><font color="#000000">
  </font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">directed-link-breed</font><font color="#000000"> [red-links red-link]

</font><font color="#007f69">links-own</font><font color="#000000"> [weight]

</font><font color="#007f69">turtles-own</font><font color="#000000"> [
            affect
            learning_rate
            lambda
            delta             </font><font color="#5a5a5a">; Generalized Rescorla-Wagner exponent                   </font><font color="#000000">
            threshold 
            event_count 
            disposition
            probability
            memory           
            ]

</font><font color="#007f69">to</font><font color="#000000"> setup-links
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ create-red-link-to </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
                 </font><font color="#0000aa">ask</font><font color="#000000"> red-link </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ 
                 </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> link-color
                 </font><font color="#0000aa">set</font><font color="#000000"> weight </font><font color="#963700">0.3</font><font color="#000000">]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ create-red-link-to </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">]
                 </font><font color="#0000aa">ask</font><font color="#000000"> red-link </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [ 
                 </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> link-color
                 </font><font color="#0000aa">set</font><font color="#000000"> weight </font><font color="#963700">0.3</font><font color="#000000">]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ create-red-link-to </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
                 </font><font color="#0000aa">ask</font><font color="#000000"> red-link </font><font color="#963700">1</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ 
                 </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> link-color
                 </font><font color="#0000aa">set</font><font color="#000000"> weight </font><font color="#963700">0.3</font><font color="#000000">]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ create-red-link-to </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">]
                 </font><font color="#0000aa">ask</font><font color="#000000"> red-link </font><font color="#963700">1</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [ 
                 </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> link-color
                 </font><font color="#0000aa">set</font><font color="#000000"> weight </font><font color="#963700">0.3</font><font color="#000000">]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [ create-red-link-to </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
                 </font><font color="#0000aa">ask</font><font color="#000000"> red-link </font><font color="#963700">2</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ 
                 </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> link-color
                 </font><font color="#0000aa">set</font><font color="#000000"> weight </font><font color="#963700">0.3</font><font color="#000000">]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [ create-red-link-to </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
                 </font><font color="#0000aa">ask</font><font color="#000000"> red-link </font><font color="#963700">2</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ 
                 </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> link-color
                 </font><font color="#0000aa">set</font><font color="#000000"> weight </font><font color="#963700">0.3</font><font color="#000000">]
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to</font><font color="#000000"> setup
  </font><font color="#0000aa">__clear-all-and-reset-ticks</font><font color="#000000">
  </font><font color="#5a5a5a">;use-new-seed  </font><font color="#000000">
  use-seed-from-user 
  setup-globals
  setup-patches
  setup-turtles
  setup-links
  </font><font color="#5a5a5a">;setup-movie   ; Uncomment to make movie</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-movie
   </font><font color="#0000aa">movie-start</font><font color="#000000"> </font><font color="#963700">&quot;out.mov&quot;</font><font color="#000000">  
   </font><font color="#0000aa">movie-grab-view</font><font color="#000000">      </font><font color="#5a5a5a">; Show the initial state</font><font color="#000000">
   </font><font color="#0000aa">repeat</font><font color="#000000"> </font><font color="#963700">750</font><font color="#000000">           </font><font color="#5a5a5a">; Movie length in frames</font><font color="#000000">
    [ go 
    </font><font color="#0000aa">movie-grab-view</font><font color="#000000"> ]
   </font><font color="#0000aa">movie-close</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-turtles
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000">
  </font><font color="#0000aa">create-turtles</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">  
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
                </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#963700">-9</font><font color="#000000"> </font><font color="#963700">-9</font><font color="#000000">      </font><font color="#5a5a5a">; For random positions use random x-cor  random y-cor</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> affect </font><font color="#963700">0.001</font><font color="#000000"> </font><font color="#5a5a5a">; For delta &gt; 0, if V(0)=0, then V(t)=0 for all t. Hence, small positive init.</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> delta </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> lambda </font><font color="#963700">1</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> learning_rate </font><font color="#963700">.1</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> threshold </font><font color="#963700">.5</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> event_count </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> disposition </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> probability </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> memory []
                  </font><font color="#0000aa">repeat</font><font color="#000000"> memory_length 
                    [</font><font color="#0000aa">set</font><font color="#000000"> memory </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> memory] 
                </font><font color="#5a5a5a">;set memory [0]    ; This recovers the memory one original model, w/initial estimate the entry.</font><font color="#000000">
                </font><font color="#5a5a5a">;set memory [0 0 0 0]</font><font color="#000000">
                </font><font color="#5a5a5a">;set label who            ; Uncomment to have agent number visisble</font><font color="#000000">
                ]  
                        
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                           
                </font><font color="#0000aa">setxy</font><font color="#000000">  </font><font color="#963700">5</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> 
                </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> affect </font><font color="#963700">0.001</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> delta </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> lambda </font><font color="#963700">1</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> learning_rate </font><font color="#963700">.1</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> threshold </font><font color="#963700">.5</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> event_count </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> disposition </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> probability </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#5a5a5a">;set memory [ 1 3 5 7 8]</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> memory []
                  </font><font color="#0000aa">repeat</font><font color="#000000"> memory_length 
                    [</font><font color="#0000aa">set</font><font color="#000000"> memory </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> memory]
                </font><font color="#5a5a5a">; show memory</font><font color="#000000">
                </font><font color="#5a5a5a">; set label who</font><font color="#000000">
                ]
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [                                    
                </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> </font><font color="#963700">9</font><font color="#000000">                   
                </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> affect </font><font color="#963700">0.001</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> delta </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> lambda </font><font color="#963700">1</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> learning_rate </font><font color="#963700">.1</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> threshold </font><font color="#963700">.5</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> event_count </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> disposition </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> probability </font><font color="#963700">0</font><font color="#000000">
                </font><font color="#0000aa">set</font><font color="#000000"> memory []
                  </font><font color="#0000aa">repeat</font><font color="#000000"> memory_length 
                    [</font><font color="#0000aa">set</font><font color="#000000"> memory </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> memory]
                </font><font color="#5a5a5a">;set memory [0 0]</font><font color="#000000">
                </font><font color="#5a5a5a">;set label who</font><font color="#000000">
              ]
</font><font color="#007f69">end</font><font color="#000000">
  
</font><font color="#007f69">to</font><font color="#000000"> setup-patches
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> inactive-color </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">]  
</font><font color="#007f69">end</font><font color="#000000">
  
</font><font color="#007f69">to</font><font color="#000000"> go                              </font><font color="#5a5a5a">; Corresponds to 'main' in C/C++</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&gt;=</font><font color="#000000"> maximum-stopping-time [</font><font color="#0000aa">stop</font><font color="#000000">]
  </font><font color="#5a5a5a">;move-turtles</font><font color="#000000">
  activate-patches
  update-event_count
  update-affect
  update-probability
  update-disposition
  </font><font color="#5a5a5a">;take-action</font><font color="#000000">
  deactivate-patches </font><font color="#5a5a5a">; Turns them back to inactive from active.</font><font color="#000000">
  </font><font color="#5a5a5a">;do-plots1</font><font color="#000000">
  </font><font color="#5a5a5a">;do-plots2</font><font color="#000000">
  </font><font color="#5a5a5a">;do-plots3</font><font color="#000000">
  </font><font color="#0000aa">tick</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> update-event_count
</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">[
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> active-color [</font><font color="#0000aa">set</font><font color="#000000"> event_count event_count </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]  
           ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> update-affect </font><font color="#5a5a5a">; Standard RW for delta=0. Standard logistic for delta=1. General S-curves : 0 &lt; delta &lt; 1</font><font color="#000000">
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> active-color 
           [</font><font color="#0000aa">set</font><font color="#000000"> affect affect </font><font color="#660096">+</font><font color="#000000"> (learning_rate </font><font color="#660096">*</font><font color="#000000"> (affect </font><font color="#660096">^</font><font color="#000000"> delta) </font><font color="#660096">*</font><font color="#000000"> (lambda </font><font color="#660096">-</font><font color="#000000"> affect))]    
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> active-color
           [</font><font color="#0000aa">set</font><font color="#000000"> affect affect </font><font color="#660096">+</font><font color="#000000"> (learning_rate </font><font color="#660096">*</font><font color="#000000"> (affect </font><font color="#660096">^</font><font color="#000000"> delta) </font><font color="#660096">*</font><font color="#000000"> extinction_rate </font><font color="#660096">*</font><font color="#000000">(</font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> affect))] 
               ]                           </font><font color="#5a5a5a">; Standard RW extinction for extinction_rate=1. Typically use &lt; 1.</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> update-probability
 </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">[
 </font><font color="#0000aa">let</font><font color="#000000"> current_probability  
        (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> spatial_sample_radius </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> active-color]</font><font color="#660096">/</font><font color="#000000">(</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> spatial_sample_radius))
 </font><font color="#0000aa">set</font><font color="#000000"> memory </font><font color="#660096">but-first</font><font color="#000000"> memory                                      </font><font color="#5a5a5a">; Drops leftmost value</font><font color="#000000">
 </font><font color="#0000aa">set</font><font color="#000000"> memory </font><font color="#660096">lput</font><font color="#000000"> current_probability memory                       </font><font color="#5a5a5a">; Adds current_prob as rightmost value</font><font color="#000000">
 </font><font color="#0000aa">set</font><font color="#000000"> probability </font><font color="#660096">mean</font><font color="#000000"> memory
 </font><font color="#5a5a5a">;set probability median memory        ; Uncomment this, and comment out mean to switch to moving median, and vice versa.</font><font color="#000000">
   ]
 </font><font color="#007f69">end</font><font color="#000000">
 
</font><font color="#007f69">to</font><font color="#000000"> update-disposition   </font><font color="#5a5a5a">; Uses Dispostition net of threshold</font><font color="#000000">
 </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
   </font><font color="#0000aa">set</font><font color="#000000"> disposition affect </font><font color="#660096">+</font><font color="#000000"> probability </font><font color="#660096">+</font><font color="#000000"> [weight] </font><font color="#660096">of</font><font color="#000000"> red-link </font><font color="#963700">1</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ([affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> 
                                          [weight] </font><font color="#660096">of</font><font color="#000000"> red-link </font><font color="#963700">2</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ([affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> threshold]
</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [
   </font><font color="#0000aa">set</font><font color="#000000"> disposition affect </font><font color="#660096">+</font><font color="#000000"> probability </font><font color="#660096">+</font><font color="#000000"> [weight] </font><font color="#660096">of</font><font color="#000000"> red-link </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ([affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000">
                                          [weight] </font><font color="#660096">of</font><font color="#000000"> red-link </font><font color="#963700">2</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ([affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> threshold]
</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [
   </font><font color="#0000aa">set</font><font color="#000000"> disposition affect </font><font color="#660096">+</font><font color="#000000"> probability </font><font color="#660096">+</font><font color="#000000"> [weight] </font><font color="#660096">of</font><font color="#000000"> red-link </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ([affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000">
                                          [weight] </font><font color="#660096">of</font><font color="#000000"> red-link </font><font color="#963700">1</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ([affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> threshold]                
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> move-turtles
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">] [  </font><font color="#5a5a5a">; This immobilizes Agent_0</font><font color="#000000">
    </font><font color="#0000aa">right</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">             </font><font color="#5a5a5a">; Adopt random heading</font><font color="#000000">
    </font><font color="#0000aa">forward</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
    </font><font color="#007f69">end</font><font color="#000000">
  
</font><font color="#007f69">to</font><font color="#000000"> take-action  
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [                                            
    </font><font color="#0000aa">if</font><font color="#000000"> disposition </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> action_radius [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> destroyed-color]]
    ]
    
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> activate-patches  </font><font color="#5a5a5a">; Patches in specified sector that are not dead</font><font color="#000000">
 </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-5</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-2</font><font color="#000000">]
      [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">1000</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> attack_rate </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> destroyed-color [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> active-color]]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> deactivate-patches
 </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-5</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-2</font><font color="#000000">]
      [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> deactivation-rate </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> destroyed-color [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> inactive-color </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">]]  
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> do-plots1
    </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Disposition&quot;</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 0&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [disposition] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 1&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [disposition] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 2&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [disposition] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
   </font><font color="#007f69">end</font><font color="#000000">
   
</font><font color="#007f69">to</font><font color="#000000"> do-plots2    
    </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Probability&quot;</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 0&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 1&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 2&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [probability] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
   </font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> do-plots3    
    </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Affect&quot;</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 0&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 1&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;turtle 2&quot;</font><font color="#000000">
    </font><font color="#0000aa">plot</font><font color="#000000"> [affect] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
   </font><font color="#007f69">end</font>
</pre>

</body>
</html>
